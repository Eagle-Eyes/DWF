var VCRLocationGA={RIGHTBAR_BOX_TYPE1_TOP:"top","RIGHTBAR_BOX_TYPE1_BOTTOM ":"bottom",RIGHTBAR_BOX_TYPE2_TOP:"top",RIGHTBAR_BOX_TYPE2_BOTTOM:"bottom"};var VCR={loadAllVcrs:function(a,b){window.vcrsLoaded=false;$.ajax({type:"POST",url:InfoQConstants.countryCode+"/vendorcontent/loadVcrs.action",dataType:"json",data:{communityIds:a,topicIds:b},success:function(c){if(c.vcrs!=null&&c.vcrs.length>0){window.vcrList=c.vcrs;window.excludedVcrs=[];window.vcrsLoaded=true}else{window.vcrList=[];window.excludedVcrs=[];window.vcrsLoaded=true}},error:function(c,d){console.log("Error!!! "+d)}})},filterByCover:function(a,b){var c=b.filter(function(d){return window.excludedVcrs.indexOf(d)==-1&&d.coverImagePath!=undefined&&d.coverImagePath!=null&&d.coverImagePath!=""});c.sort(function(){return 0.5-Math.random()});if(a<0||c.length<=a){return c}return c.slice(0,a)},filterByCompany:function(a,b){return b.filter(function(c){return window.excludedVcrs.indexOf(c)==-1&&c.company==a})},filterByTopic:function(a,b){return b.filter(function(c){return window.excludedVcrs.indexOf(c)==-1&&c.categories.indexOf(parseInt(a))>-1})},filterByTopics:function(c,a){var b=c.split(",");return a.filter(function(e){if(window.excludedVcrs.indexOf(e)!=-1){return false}for(var d in b){if(e.categories.indexOf(parseInt(b[d]))>-1){return true}}return false})},filterByTopicsWithoutList:function(d,a,b){var c=d.split(",");return a.filter(function(f){if(window.excludedVcrs.indexOf(f)!=-1||b.indexOf(f)!=-1){return false}for(var e in c){if(f.categories.indexOf(parseInt(c[e]))>-1){return true}}return false})},addToExcludedList:function(a){window.excludedVcrs=window.excludedVcrs.concat(a)},addIdstoExcludeList:function(a){if(a!=""){var c=a.split(",");for(var b in window.excludedVcrs){if(c.indexOf(window.excludedVcrs[b].id.toString())>-1){VCR.addToExcludedList(b)}}}},getRandomVcrs:function(a,b){var c=b.filter(function(d){return window.excludedVcrs.indexOf(d)==-1&&d.categories!=null&&d.categories.length>0});if(c.length<=a){return c}c=VCR.shuffleArray(c);return c.slice(0,a)},shuffleArray:function(d){var c=d.length,b,a;while(0!==c){a=Math.floor(Math.random()*c);c-=1;b=d[c];d[c]=d[a];d[a]=b}return d},getByTopicsAndCommunities:function(b,h,i,d,c,g){var j=[];var a=b;if(h!=""){a=VCR.filterByTopics(h,b)}if(c){a=VCR.filterByCover(-1,a)}if(g!=null){a=VCR.filterByCompany(g,a)}if(a.length<d){var f=d-a.length;var e=b;if(i!=""){e=VCR.filterByTopicsWithoutList(i,b,a)}if(c){e=VCR.filterByCover(-1,e)}if(g!=null){e=VCR.filterByCompany(g,e)}if(e.length<f){j=a.concat(e)}else{j=a.concat(VCR.getRandomVcrs(f,e))}}else{j=VCR.getRandomVcrs(d,a)}return j},isVcrSponsored:function(d,c){for(var a in d){var b=d[a];if(b.target!=null&&b.target!=""){if(b.target.indexOf("show.action?vcr="+c.id)!=-1){return true}else{if(b.target==c.sponsoredPath){return true}}}}return false}};function submitNativeAdCustomVar(a){var b=b||[];b.push(["_setCustomVar",5,"VCR Native Ads experiment","native-vcr-A"+a,3])}function getVendorContentIconType(a){if(null==a.type){return""}if(a.isPodcast){return"podcast"}if(a.type!="sponsorship"){return a.type}if(null!=a.sponsoredPath){if(a.sponsoredPath.startsWith("/news")){return"article"}if(a.sponsoredPath.startsWith("/articles")){return"article"}if(a.sponsoredPath.startsWith("/interviews")){return"demo"}if(a.sponsoredPath.startsWith("/presentations")){return"demo"}if(a.sponsoredPath.startsWith("/minibooks")){return"pdf"}if(a.sponsoredPath.startsWith("/podcasts")){return"podcast"}}return""}function getVcrAnchorUrl(h,a,b,e){var d=$("#cont_item_primary_topic").val();var c="";c+=InfoQConstants.countryCode+"/vendorcontent/show.action?vcr="+h.id;if(d){c+="&primaryTopicId="+d;c+="&vcrPlace="+b;if(InfoQConstants.pageType){c+="&pageType="+InfoQConstants.pageType}c+="&vcrReferrer="+encodeURIComponent(InfoQConstants.pageUrl)}var g="infoq";if(window.device==="mobile"){g+="_mobile"}c+="&utm_source="+g+"&utm_medium="+(e?"VCRinlineitem":"VCR")+"&utm_campaign=vcr_";if(a!==undefined&&a!==null&&a!==""){c+=a}else{c+=getPageMappingforPageType()}var f=VCRLocationGA[b];if(f===undefined){f=b.toLowerCase()}c+="_click&utm_content="+f;return c}function getOptionalVcrAnchorUrl(d,a,b){var c="";c+=InfoQConstants.countryCode+"/vendorcontent/show.action?vcr="+d.id;if(a!==undefined&&a!==null&&a!==""){c+="&utm_source=infoq&utm_medium=related_content_native_link&utm_campaign=relatedContent_native_"+a+"_clk"}else{c+="&utm_source=infoq&utm_medium=related_content_native_link&utm_campaign=relatedContent_native_"+getPageMappingforPageType()+"_clk"}c+="&utm_content="+b.toLowerCase();return c}function getPageMappingforPageType(){if(InfoQConstants.pageType==="CONTENT_TYPE_PAGE"){return"contentTypePage_all"+InfoQConstants.mapping.toLowerCase()}else{if(InfoQConstants.pageType==="CATEGORY_PAGE_BY_CONTENT_TYPE"){return"categoryPageByContentType_all"+InfoQConstants.mapping.toLowerCase()}else{if(InfoQConstants.pageType==="CATEGORY_PAGE"){return"categoryPage"}}}return"homePage"}function getVcrCoverElement(c,d,l){var h=$(document.createElement("div"));h.addClass("m-section");var b=$(document.createElement("div"));b.addClass("m-atom");b.addClass("m-cover");var e=$(document.createElement("div"));e.addClass("m-cover-stencil");var g=$(document.createElement("img"));g.attr("src",d.coverImagePath);g.css("height","177px");g.css("width","125px");var j=$(document.createElement("div"));j.addClass("m-atom");j.addClass("m-title");var f=$(document.createElement("div"));f.addClass("m-table");f.css("width","100%");if(!l){f.css("border-right","1px dotted #d7d7d7")}var a=$(document.createElement("span"));a.addClass("m-table-cell");var i=$(document.createElement("p"));i.text(d.title);if(standaloneVcr.title.length>88){i.css("font-size","12px")}var k=$(document.createElement("span"));if(d.author&&d.author!=""){k.text(d.author)}else{k.text(d.company)}a.append(i);a.append(k);f.append(a);j.append(f);b.append(e);e.append(g);if(l){h.append(b);c.append(h)}else{c.append(b)}h.append(b);c.append(b);c.append(j)}function getCommonElements(b,a,c){var e=$(".vcrs");e.empty();for(var d in b){var h='{"id": "'+b[d].id+'", "title": "'+b[d].title+'"}';var g=$(document.createElement("h3"));g.addClass("entry"+getVendorContentIconType(b[d]));g.addClass("f_vcrdefault");g.attr("data-place",c);g.attr("jsh",h);var f=$(document.createElement("a"));if(b[d].external&&!b[d].registerOnInfoq&&!b[d].landingOnInfoq){f.attr("target",b[d].urlTarget)}f.attr("href",getVcrAnchorUrl(b[d],a,c,false));f.text(b[d].title);g.append(f);e.append(g)}}function getMobileCommonElements(b,a,c){var e=$(".rvc_vcrs ul");e.empty();for(var d in b){var h='{"id": "'+b[d].id+'", "title": "'+b[d].title+'"}';var g=$(document.createElement("li"));g.addClass("rvc_"+getVendorContentIconType(b[d]));g.addClass("f_vcrdefault");g.attr("data-place",c);g.attr("jsh",h);var f=$(document.createElement("a"));if(b[d].external&&!b[d].registerOnInfoq&&!b[d].landingOnInfoq){f.attr("target",b[d].urlTarget)}f.attr("href",getVcrAnchorUrl(b[d],a,c,false));f.text(b[d].title);g.append(f);e.append(g)}}function getCommonMobileElement(d,a){var c=$(document.createElement("li"));c.addClass("f_vcrdefault");c.attr("data-place","BOTTOM");var e='{"id": "'+d.id+'", "title": "'+d.title+'"}';c.attr("jsh",e);var b=$(document.createElement("a"));b.addClass("rvc_"+getVendorContentIconType(d));b.attr("href",getVcrAnchorUrl(d,a,"BOTTOM",false));b.text(d.title);c.append(b);return c}function getABC2Elements(b,a,c,d){d.addClass("m-trigger");d.css("width","46%");d.css("float","right");d.find("p.title").css("font-size","16px");var e=$(document.createElement("a"));e.addClass("f_vcrdefault");e.addClass("no-jsh");e.attr("data-place","BOTTOM");e.attr("data-vcrtitle",b.title);e.attr("data-vcrid",b.id);if(b.external&&!b.registerOnInfoq&&!b.landingOnInfoq){e.attr("target",b.urlTarget)}e.attr("href",getVcrAnchorUrl(b,a,"BOTTOM",false));getVcrCoverElement(e,b,false);c.append(e);c.css("display","block")}function getPopUpVcr(c,a){var e=$(document.createElement("a"));e.addClass("f_vcrdefault");e.addClass("hidden");e.addClass("no-jsh");e.addClass("no-data");e.attr("data-place","BOTTOM");e.css("float","left");if(c.external&&!c.registerOnInfoq&&!c.landingOnInfoq){e.attr("target",c.urlTarget)}e.attr("href",getVcrAnchorUrl(c,a,"BOTTOM",false));var b=$(document.createElement("div"));b.addClass("vcrid");b.css("display","none");b.text(c.id);var d=$(document.createElement("div"));d.addClass("vcrtitle");d.css("display","none");d.text(c.title);e.append(b);e.append(d);getVcrCoverElement(e,c,true);return e}function getABC3Elements(b,a,d){d.addClass("m-trigger");d.addClass("m-section");var c=$(document.createElement("div"));c.addClass("m-panel");c.append(getPopUpVcr(b[0],a));c.append(getPopUpVcr(b[1],a));return c}function getOptionalElements(c,f){for(var d in c){var j=$(document.createElement("div"));j.addClass("row");var g=$(document.createElement("a"));g.attr("data-vcrtitle",c[d].title);g.attr("data-vcrid",c[d].id);g.attr("data-place",f.vcrsPosition<=1?"1":"2");g.attr("href",getOptionalVcrAnchorUrl(c[d],f.uriMapping,f.vcrsPosition<=1?"top":"bottom"));var k=$(document.createElement("div"));k.addClass("cover");var b=$(document.createElement("div"));b.addClass("vcr_optional_icontainer");var e=$(document.createElement("img"));e.attr("src",c[d].coverImagePath);b.append(e);k.append(b);g.append(k);var h=$(document.createElement("div"));h.addClass("vcr_title");var a=$(document.createElement("p"));a.text(c[d].title);var i=$(document.createElement("span"));if(c[d].author&&c[d].author!=""){i.text(c[d].author)}else{i.text(c[d].company)}h.append(a);h.append(i);g.append(h);j.append(g);$(".vcrs_optional_"+f.vcrsPosition).append(j)}}function toggleAds(a,c){var b=(a.length==2);setTimeout(function(){var f;if(c.vcrsPosition<=1){f=$("#id_300x250_banner_top")}else{f=$("#id_300x250_banner_bottom")}var g=f.find("iframe");var d=0;if(g.length>0){d+=g.contents().height()}if(d===0||f.css("display")==="none"){f.css("display","none");var e="vcrOptional"+(c.vcrsPosition<=1?"1":"2");if(b){$("#"+e).css("display","block");$("#"+e+" .row > a").addClass("f_vcroptional");VCR.addToExcludedList(a);if(c.vcrsPosition<=1){window.finishedVcrOptional1=true}else{window.finishedVcrOptional2=true}setTimeout(function(){submitNativeAdCustomVar(c.vcrsPosition<=1?"-top":"-bottom")},isAdBlocked()?2500:0)}else{if($("#"+e).parents(".gbanner").length){$("#"+e).parents(".gbanner").first().css("display","none")}if(c.vcrsPosition<=1){window.finishedVcrOptional1=true}else{window.finishedVcrOptional2=true}}}else{f.addClass("f_dfp_ad");if(c.vcrsPosition<=1){window.finishedVcrOptional1=true}else{window.finishedVcrOptional2=true}}},isAdBlocked()?0:3500)}function getSponsoredPodcast(b,f,c,e,d){var a=null;$.ajax({type:"POST",url:b,dataType:"json",data:{topicIds:f,categoryId:c,channel:e,language:d},success:function(g){if(g.vcrs!=null&&g.vcrs.length>0){populateSponsoredPodcast(g.vcrs[0],e,d)}},error:function(g,h){console.log("Error!!! "+h)}});return a}function populateSponsoredPodcast(a,g,f){var b=jQuery(".podcast__sponsored."+g.toLowerCase());if(b.length){b.attr("data-vcrid",a.id);b.attr("data-vcrtitle",a.title);var c=getVcrAnchorUrl(a,"contentTypePage",b.data("place"),false);var d=b.find(".podcast__featured-image");d.attr("href",c);if(a.external&&!a.registerOnInfoQ&&!a.landingOnInfoq){d.attr("target","_blank")}d.find("img").attr("src",a.coverImagePath);var e=b.find(".podcast__title").find("a");e.attr("href",c);e.text(a.title);b.find(".podcast__excerpt").text(a.shortSummary);b.find(".podcast__highlighted").text(a.company);b.find(".la").attr("href",c);b.css("display","block")}};